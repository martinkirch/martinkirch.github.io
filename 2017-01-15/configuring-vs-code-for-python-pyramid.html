<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title> Tweaking Visual Studio Code for Python and Pyramid - Martin's notes </title>
    <meta name="description" content="Installing and configuring VS Code for Python programming is not enough documented. Here are my findings."/>
    <meta name="keywords" content=" python, ide, pyramid, in_english" />

    <!-- Bootstrap -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

    <link href="/pygments.css" rel="stylesheet">

    <style>
      pre{
        background: #eee;
        padding:1em;
      }
    </style>
  </head>
  <body>
    <nav class="navbar">
        <div class="navbar-header">
          <a class="navbar-brand" href="/">Martin's notes</a>
        </div>
        <ul class="nav navbar-nav navbar-right">
            
                
                    <li><a href="/">All posts</a></li>
                
                    <li><a href="/tags.html">Tags</a></li>
                
            
          </ul>
      </div>
    </nav>

    <div class="container">
      
<div itemscope itemtype="http://schema.org/NewsArticle">
  <meta itemscope itemprop="mainEntityOfPage"  itemType="https://schema.org/WebPage" itemid="http://martinkirch.github.io/2017-01-15/configuring-vs-code-for-python-pyramid.html"/>
  <div class="page-header">
    <h1 itemprop="name">Tweaking Visual Studio Code for Python and Pyramid</h1>
    
  </div>

  <small>Tags : 
    
      <a href="/tag/python.html">
          <span class="label label-default" itemprop="about">python</span>
      </a>
    
      <a href="/tag/ide.html">
          <span class="label label-default" itemprop="about">ide</span>
      </a>
    
      <a href="/tag/pyramid.html">
          <span class="label label-default" itemprop="about">pyramid</span>
      </a>
    
      <a href="/tag/in_english.html">
          <span class="label label-default" itemprop="about">in_english</span>
      </a>
    
    
        <p class="text-right">
            Posted on <span itemprop="datePublished">2017-01-15</span>
            <span itemprop="author" itemscope itemtype="https://schema.org/Person">
              by <span itemprop="name">Martin Kirchgessner</span>
            </span>
        </p>
    
    </small>

    <div class="col-md-8 col-md-offset-2">
      <p>As I recently became a full-time Python developer (often using the 
<a href="https://trypyramid.com/">Pyramid framework</a>) I tried to find a cool IDE, and 
gave a chance to <a href="https://code.visualstudio.com/">Visual Studio Code</a>. 
At first I liked the editor but the Python extension suffered many glitches, 
especially with virtual environments.
A month after everything is configured correctly, 
turning VS Code into a comfortable IDE. 
The relevant tweaking is not enough documented so I'm sharing here my findings.</p>
<p>I'm assuming you already installed VS Code and that you're already familiar 
with the Python language and environment.
Check that the <code>code</code> command is in your <code>$PATH</code> (on a Mac you'll have to do it 
manually) and install Don Jayamanne's 
<a href="https://github.com/DonJayamanne/pythonVSCode">Python extension</a>.</p>
<h2>Linting, correctly</h2>
<p>The linter is the code analyzer which will add warning and error annotations 
in your code: it's the most visible part of the Python extension.</p>
<p>The extension we're using relies on <a href="https://www.pylint.org/">pylint</a>, by default.
You should <code>pip install pylint</code> in each virtual environment you work with, 
so <code>pylint</code> will be able to find libraries correctly. 
It will check the respect of coding standards, detect syntax errors, predict runtime 
exceptions, give refactoring hints, and more. It's very useful, but the default 
configuration is very, very strict so I suggest you configure it otherwise.
You can use <a href="/2017-01-15/pylintrc">my own .pylintrc file</a> or 
create your own by invoking:</p>
<pre class="codehilite"><code class="language-bash">pylint --generate-rcfile &gt;&gt; ~/.pylintrc</code></pre>


<p>When editing this file you may need the detailed documentation
<a href="https://pylint.readthedocs.io/en/latest/reference_guide/features.html">available here</a>.</p>
<h2>Using the right virtual environment in each workspace</h2>
<p>Opening a folder in VS Code creates a workspace, which is analogous 
to "projects" is other IDEs. VS Code will create a <code>.vscode/</code> folder at the
workspace's root and save its stuff inside (state, debug configurations, ...).
It's also possible to define workspace parameters, which will override default 
or system-wide parameters. These are accessible in the preferences menu aside 
the system-wide parameters. </p>
<p>If you invoke <code>code .</code> from a shell which has activated a virtual environment,
Python invocations in VS Code will use this 
environment... but it's not completely reliable, especially on MacOS. 
Sometimes VS Code will use system's Python, or another environment.
Workspace parameters can circumvent this. 
For example, I'm setting at least the following two in each of my workspaces:</p>
<pre class="codehilite"><code class="language-json">{
    &quot;python.linting.pylintPath&quot;: &quot;/Users/martin/.virtualenvs/my_env/bin/pylint&quot;,
    &quot;python.pythonPath&quot;: &quot;/Users/martin/.virtualenvs/my_env/bin/python&quot;
}</code></pre>


<h2>Debugging Pyramid applications</h2>
<p>Before using the debugger panel of VSCode, you should add configurations.
When you open this panel in a new workspace, the "Edit 'launch.json'" button 
has a red point, suggesting you to click on it, then select one of the templates. 
Select "Python", of course.</p>
<p>Default configuration provides useful settings for a single Python script, 
among others. 
Pyramid applications are a bit more complicated, because <code>pserve</code> launches 
sub-processes that may run below the debugger's radar, missing your breakpoints. 
With the following configuration, you can even put breakpoints on local 
libraries:</p>
<pre class="codehilite"><code class="language-json">{
    &quot;name&quot;: &quot;Pserve&quot;,
    &quot;type&quot;: &quot;python&quot;,
    &quot;request&quot;: &quot;launch&quot;,
    &quot;stopOnEntry&quot;: false,
    &quot;pythonPath&quot;: &quot;/Users/martin/.virtualenvs/my_env/bin/python&quot;,
    &quot;program&quot;: &quot;/Users/martin/.virtualenvs/my_env/bin/pserve&quot;,
    &quot;cwd&quot;: &quot;${workspaceRoot}&quot;,
    &quot;args&quot;: [
        &quot;-v&quot;,
        &quot;development.ini&quot;
    ],
    &quot;console&quot;: &quot;integratedTerminal&quot;,
    &quot;debugOptions&quot;: [
        &quot;RedirectOutput&quot;,
        &quot;WaitOnAbnormalExit&quot;,
        &quot;WaitOnNormalExit&quot;
    ]
},</code></pre>


<p>Do <strong>not</strong> add <code>--reload</code> to the <code>args</code> array. </p>
<h2>Unit tests integration... or not</h2>
<p>VS Code has the ability to detect, run and show reports on your project's 
unit test. I did not find it perticularly useful, so disabled it with:</p>
<pre class="codehilite"><code class="language-json">&quot;python.unitTest.promptToConfigure&quot;:false</code></pre>


<p>Instead I'm writing each test case as a standalone runnable script, 
using the following snippet:</p>
<pre class="codehilite"><code class="language-python">if __name__ == '__main__':
    unittest.main(failfast=True)</code></pre>


<p>Thus I can also debug a single test case by hitting F5 while editing it.</p>
<h2>Other parameters</h2>
<p>To finish I also copy and explain the rest of my configuration, pick what you 
prefer. Hovering the property name in the settings edition panel will provide 
you explanations about what each setting does.</p>
<pre class="codehilite"><code class="language-json">&quot;workbench.editor.enablePreview&quot;: false,
&quot;workbench.statusBar.visible&quot;: true,
&quot;explorer.openEditors.dynamicHeight&quot;: false,
&quot;explorer.openEditors.visible&quot;: 4,
&quot;editor.rulers&quot;: [80],
&quot;window.reopenFolders&quot;: &quot;all&quot;,
&quot;files.insertFinalNewline&quot;: true,
&quot;editor.renderLineHighlight&quot;: &quot;all&quot;,</code></pre>


<p>Do not show all files in the explorer panel:</p>
<pre class="codehilite"><code class="language-json">&quot;files.exclude&quot;: {
    &quot;**/.git&quot;: true,
    &quot;**/.svn&quot;: true,
    &quot;**/.hg&quot;: true,
    &quot;**/.DS_Store&quot;: true,
    &quot;.idea&quot;: true,
    &quot;**/*.pyc&quot;: true,
},</code></pre>


<p>You wil likely also add <code>.vscode/</code> to your <code>.gitignore</code>Â files.</p>
<p>For now Mako templates are not recognized, so let's highlight HTML at least:</p>
<pre class="codehilite"><code class="language-json">&quot;files.associations&quot;: {
    &quot;*.mako&quot; : &quot;html&quot;
},</code></pre>


<h2>Keyboard shortcuts</h2>
<p>As a suggestion, here are my key bindings (on a Mac keyboard). 
VS Code will show you some hints in the configuration file as you edit it, 
so non-US or Mac keyboards are easy to configure. </p>
<pre class="codehilite"><code class="language-json">[
{ &quot;key&quot;: &quot;cmd+.&quot;, &quot;command&quot;: &quot;editor.action.commentLine&quot;,
                    &quot;when&quot;: &quot;editorTextFocus &amp;&amp; !editorReadonly&quot; },
{ &quot;key&quot;: &quot;cmd+l&quot;, &quot;command&quot;: &quot;workbench.action.gotoLine&quot; },
{ &quot;key&quot;: &quot;cmd+g&quot;, &quot;command&quot;: &quot;editor.action.addSelectionToNextFindMatch&quot;,
                    &quot;when&quot;: &quot;editorFocus&quot; },
{ &quot;key&quot;: &quot;cmd+d&quot;,  &quot;command&quot;: &quot;editor.action.deleteLines&quot;,
                    &quot;when&quot;: &quot;editorTextFocus &amp;&amp; !editorReadonly&quot; },
{ &quot;key&quot;: &quot;cmd+down&quot;, &quot;command&quot;: &quot;editor.action.moveLinesDownAction&quot;,
                        &quot;when&quot;: &quot;editorTextFocus &amp;&amp; !editorReadonly&quot; },
{ &quot;key&quot;: &quot;cmd+up&quot;, &quot;command&quot;: &quot;editor.action.moveLinesUpAction&quot;,
                    &quot;when&quot;: &quot;editorTextFocus &amp;&amp; !editorReadonly&quot; },

{ &quot;key&quot;: &quot;alt+down&quot;, &quot;command&quot;: &quot;scrollLineDown&quot;,
                        &quot;when&quot;: &quot;editorTextFocus&quot; },
{ &quot;key&quot;: &quot;alt+up&quot;, &quot;command&quot;: &quot;scrollLineUp&quot; ,
                    &quot;when&quot;: &quot;editorTextFocus&quot; },
{ &quot;key&quot;: &quot;cmd+shift+e&quot;, &quot;command&quot;: &quot;python.execSelectionInTerminal&quot; },
{ &quot;key&quot;: &quot;cmd+e&quot;, &quot;command&quot;: &quot;python.execInTerminal&quot; },
{ &quot;key&quot;: &quot;cmd+r&quot;,  &quot;command&quot;: &quot;python.refactorExtractVariable&quot; },
]</code></pre>


<p><code>cmd+g</code> is definitely my favorite.</p>
<p>A final remark: you can start block editing by holding <code>Shift+Alt</code> while selecting.</p>
<p>Enjoy!</p>
    </div>

</div>

    </div>
    <hr />
    <footer>
      <div class="container">
        <div class="row text-center">
          
        </div>
        <p class="text-center"><small>martinkirch.github.io &copy; 2020</small></p>
      </div>
    </footer>
  </body>
</html>